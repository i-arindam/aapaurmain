<% content_for :stylesheet do %>
  <%= stylesheet_link_tag "roundabout/viewer_pane" %>
<% end %>
<% content_for :javascript do %>
  <%= javascript_include_tag "roundabout/jquery.roundabout.min" %>
  <%= javascript_include_tag "roundabout/viewer_pane_controller" %>
<% end %>

<div class="viewerPane <%= class_name %>">
  <ul class="user-container">
  <% if user_collection and user_collection.length > 0 %>
  <% puts user_collection %>
    <% user_collection.each do |user|
            name = user.name
            ideal_marriage = user.ideal_marriage
            profession = user.profession
            user_id = user.id
            if !viewer_pane_info.nil?
              info =  viewer_pane_info[user_id.to_i] 
            end
    %>
      <li class="user-info">
        <div class="imageContainer">
          <img src="https://mail-attachment.googleusercontent.com/attachment/u/0/?ui=2&ik=89210d7c1d&view=att&th=13a59a98a94c3ebb&attid=0.1&disp=inline&realattid=f_h88kz5ba0&safe=1&zw&saduie=AG9B_P9HbPXeRR9YVmb1hdRtw9If&sadet=1350124054105&sads=24RWcNFdaP6HElEZ2-_VAEehEuI">
        </div> 
        <div class="bio">
          <div class="name">
            <h2><%= name.upcase %></h2>
          </div>
          <div class="bio-details">
            <div>
              <label class="span2">Ideal Partner</label>
              <p class="span2"><%= ideal_marriage %></p>
            </div>
            <div>
              <label class="span2">What excites me!</label>
              <p class="span2"><%= (user.interested_in.map(&:interested_in)).join(",") %></p>	
            </div>
            <div>
              <label class="span2">Hobbies</label>
              <p class="span2"><%= (user.hobby.map(&:hobby)).join(",") %></p>
            </div>
            <div>
              <label class="span2">Profession</label>
              <p class="span2"><%= profession %></p>	
            </div>
          </div>
        </div>
      <div class="pull-left">
      <% if info%>  
        <% info[:show_send] ? '' : class_to_add="hide" %>
          <input type="button" data-toggle="modal" data-target="#myModal" class="<%=class_to_add%> btn btn-danger btn-large j-send-request <%= @values['show-cta'] ? 'showCta' : '' %>" value="Send Request" id="send-<%= user_id %>"/>

        <% info[:show_withdraw] ? '' : class_to_add_1="hide" %>
          <input type="button" data-toggle="modal" data-target="#myModal" class="<%=class_to_add_1%> btn btn-danger j-withdraw-request" value="Withdraw Request" id="withdraw-<%= user_id %>" />

        <% info[:show_accept] ? '' : class_to_add_2="hide" %>
          <input type="button" data-toggle="modal" data-target="#myModal" class=" <%=class_to_add_2%> btn btn-success j-accept-request" value="Accept Request" id="accept-<%= user_id %>" />

        <% info[:show_decline] ? '' : class_to_add_3="hide" %>
          <input type="button" data-toggle="modal"  data-target="#myModal" class="<%=class_to_add_3%> btn btn-danger j-decline-request" value="Decline Request" id="decline-<%= user_id %>" />
          
          <% info[:show_withdraw_lock] ? '' : class_to_add_4="hide" %>
            <input type="button" data-toggle="modal"  data-target="#myModal" class="<%=class_to_add_4%> btn btn-danger j-withdraw-lock" value="Withdraw Lock" id="lock-<%= user_id %>" />

      <% end %>

    </div>	
    </li>
    <% end %>
  <% end %>
  </ul>
</div>